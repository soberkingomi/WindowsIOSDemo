# WindowsIOSDemo

这是一个在 Windows 环境下开发 iOS 原生应用（SwiftUI）的示例项目。它展示了如何编写代码，并通过 GitHub Actions 在云端（macOS 环境）自动构建和打包 `.ipa` 文件。

## 项目结构

- **WindowsIOSDemo/**: 包含 iOS App 的源代码（Swift）和资源文件。
  - `WindowsIOSDemoApp.swift`: App 入口。
  - `ContentView.swift`: 主界面 UI。
  - `Info.plist`: App 配置。
  - `Assets.xcassets`: 图标和图片资源。
- **WindowsIOSDemo.xcodeproj/**: Xcode 项目文件（由脚本生成的最小化版本）。
- **.github/workflows/**: CI/CD 配置文件，定义了构建流程。

## 如何使用

### 1. 本地开发 (Windows)

由于 Windows 无法运行 Xcode，你主要进行代码编辑和阅读：

1. **Clone 仓库**:
   ```bash
   git clone https://github.com/your-username/WindowsIOSDemo.git
   ```
2. **编辑代码**:
   使用 VS Code、Cursor 或其他编辑器打开文件夹。你可以修改 `ContentView.swift` 来改变 UI。

### 2. 云端构建 (GitHub Actions)

构建过程完全在 GitHub 上进行：

1. **Push 代码**:
   将修改后的代码 push 到 `main` 分支。
   ```bash
   git add .
   git commit -m "Update UI"
   git push origin main
   ```

2. **查看构建**:
   - 进入 GitHub 仓库页面。
   - 点击顶部的 **Actions** 标签。
   - 你会看到 `iOS Build` 工作流正在运行。

3. **下载产物**:
   - 当构建成功（绿色对勾）后，点击该次运行记录。
   - 在页面底部的 **Artifacts** 区域，下载 `WindowsIOSDemo-Build`。
   - 解压后你会看到 `.xcarchive` 和 `.ipa` 文件（如果签名配置正确）。

## 关于签名 (Signing)

默认配置下，本项目使用 **无签名 (Unsigned)** 或 **Ad-Hoc 无证书** 方式构建。这意味着：
- 生成的 `.ipa` 可能无法直接安装到未越狱的 iPhone 上。
- 这主要用于验证代码是否能编译通过。

**如果你需要安装到真机，请配置 GitHub Secrets：**

1. 准备 Apple 开发者账号的证书 (`.p12`) 和描述文件 (`.mobileprovision`)。
2. 在 GitHub 仓库 -> Settings -> Secrets and variables -> Actions 中添加：
   - `BUILD_CERTIFICATE_BASE64`: Base64 编码的 .p12 文件内容。
   - `P12_PASSWORD`: .p12 文件的密码。
   - `BUILD_PROVISION_PROFILE_BASE64`: Base64 编码的 .mobileprovision 文件内容。
   - `KEYCHAIN_PASSWORD`: 任意字符串，用于临时解锁 CI 环境的 keychain。
3. 修改 `.github/workflows/ios-build.yml` 中 "Setup Signing" 步骤的注释代码以启用签名。

## 如何扩展

### 修改 App 名称和 Bundle ID
- 打开 `WindowsIOSDemo.xcodeproj/project.pbxproj`。
- 搜索 `PRODUCT_BUNDLE_IDENTIFIER` 修改包名。
- 搜索 `PRODUCT_NAME` 修改 App 名称（注意不要破坏文件结构）。
- 或者在 `Info.plist` 中修改 `CFBundleName`。

### 增加新页面
1. 在 `WindowsIOSDemo` 目录下新建 Swift 文件，例如 `DetailView.swift`。
2. 在 `project.pbxproj` 中手动注册该文件（这一步在 Windows 上比较繁琐，需要同时添加到 `PBXBuildFile`, `PBXFileReference`, `PBXGroup`, `PBXSourcesBuildPhase`）。
   - **建议**：尽量保持文件数量少，或者请求 AI 帮你生成新的 `project.pbxproj`。

---
*Generated by Antigravity*
